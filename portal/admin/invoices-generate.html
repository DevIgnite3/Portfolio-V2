<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invoices &bull; Admin &bull; DevIgnite Portal</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="stylesheet" href="/portal/assets/css/portal.css" />
</head>
<body>
  <div class="portal-wrap">

    <header class="topbar">
      <div class="topbar__inner">
        <a href="/portal/admin/dashboard.html" class="topbar__brand">
          <img src="/images/logo.png" alt="DevIgnite" />
          <span class="topbar__brand-tag">Admin</span>
        </a>
        <button class="topbar__toggle" aria-label="Menu" onclick="document.querySelector('.topbar__nav').classList.toggle('open')">
          <svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <nav class="topbar__nav">
          <a href="/portal/admin/dashboard.html">Dashboard</a>
          <a href="/portal/admin/clients-create.html">Clients</a>
          <a href="/portal/admin/content-requests.html">Requests</a>
          <a href="/portal/admin/invoices-generate.html" class="active">Invoices</a>
          <a href="/portal/admin/contracts-upload.html">Contracts</a>
          <a href="#" id="logout" class="nav-logout">Logout</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="page-title">
        <h1>Upload Invoice</h1>
        <p class="subtitle">Generate a PDF, then upload it for a client.</p>
      </div>

      <div class="grid">
        <div class="card">
          <div id="state"></div>

          <div class="actions mb-1">
            <a href="/barebones-invoices/index.html" target="_blank" rel="noopener noreferrer"><button type="button" class="btn-secondary">Open Invoice Generator</button></a>
          </div>

          <form id="form" novalidate>
            <label for="client">Client</label>
            <select id="client" name="client" required></select>

            <div class="row">
              <div>
                <label for="invoiceNumber">Invoice Number</label>
                <input id="invoiceNumber" name="invoiceNumber" required />
              </div>
              <div>
                <label for="date">Invoice Date</label>
                <input id="date" name="date" type="date" required />
              </div>
            </div>

            <div class="row">
              <div>
                <label for="amount">Amount</label>
                <input id="amount" name="amount" type="number" step="0.01" required />
              </div>
              <div>
                <label for="currency">Currency</label>
                <input id="currency" name="currency" value="ZAR" required />
              </div>
            </div>

            <label for="status">Status</label>
            <select id="status" name="status" required>
              <option value="unpaid">Unpaid</option>
              <option value="paid">Paid</option>
              <option value="overdue">Overdue</option>
            </select>

            <label for="pdf">Invoice PDF</label>
            <input id="pdf" name="pdf" type="file" accept="application/pdf" required />

            <div id="uploadProgress" hidden>
              <label>Upload Progress</label>
              <div class="progress"><div id="bar"></div></div>
              <p class="small mt-1" id="progressText"></p>
            </div>

            <div class="actions">
              <button id="submit" type="submit">Upload Invoice</button>
              <button id="refresh" type="button" class="btn-secondary">Reload Clients</button>
            </div>
          </form>
        </div>

        <div class="card">
          <h2 class="mt-0">Notes</h2>
          <p class="small">Invoice records are saved under <strong>clients/{clientId}/invoices</strong>.</p>
          <p class="small">The PDF is stored at <strong>/invoices/{clientId}/{invoiceId}.pdf</strong>.</p>
          <hr class="divider" />
          <p class="small">Tip: use your browser&rsquo;s Print &rarr; Save as PDF from the generator.</p>
        </div>
      </div>
    </main>

    <footer class="portal-footer">&copy; 2026 <a href="/">DevIgnite</a></footer>
  </div>

  <script type="module" src="/portal/assets/js/admin-invoices-generate.js"></script>
</body>
</html>
